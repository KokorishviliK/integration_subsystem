
////////////////////////////////////////////////////////////////////////////////

// <Заголовок модуля: краткое описание и условия применения модуля.>

//  

////////////////////////////////////////////////////////////////////////////////

#Область СлужебныеПроцедурыИФункции

Процедура ПередЗаписью(Отказ, Замещение)
    Для Каждого Запись Из ЭтотОбъект Цикл
        Если Перечисления.инт_СтатусыВходящихСообщений.ЭтоОшибочныйСтатус(Запись.СтатусСообщения)
            И Не ЗначениеЗаполнено(Запись.ТекстОшибки) Тогда
            ВызватьИсключение "При попытке зафиксировать ошибочный статус - не заполнен текст ошибки!";
        КонецЕсли;
    КонецЦикла;
КонецПроцедуры

Процедура ПриЗаписи(Отказ, Замещение)
	Для Каждого Запись Из ЭтотОбъект Цикл
		РегистрыСведений.инт_ИсторияСтатусовВходящихСообщений.ЗаписатьСтатусВИсторию(Запись.ИдентификаторСообщения,
		Запись.СтатусСообщения,
		Запись.ТекстОшибки);
		Если Запись.СтатусСообщения = Перечисления.инт_СтатусыВходящихСообщений.Обработан Тогда
			РегистрыСведений.инт_СообщенияКУдалению.ЗарегистрироватьСообщениеКУдалению(Запись.ИдентификаторСообщения, Перечисления.инт_НаправлениеПотокаДанных.Входящий);
		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

