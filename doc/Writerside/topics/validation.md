# Валидация пакетов

В данной статье содержится описание механизма валидации пакетов.

## Условия срабатывания валидации

<tabs>
    <tab id="incoming" title="Входящий поток">
        Входящее сообщение валидируется в момент получения. Сразу после десериализации и до передачи в очередь,
        или непосредственной обработки. 
    </tab>
    <tab id="outgoing" title="Исходящий поток">
        Исходящее сообщение валидируется сразу после формирования и до записи сформированного сообщения.
        Если валидация не будет успешной, формирование потока прервется с соответствующей ошибкой. 
    </tab>
</tabs>


## Основной принцип валидации

В каждом потоке, подлежащем валидации, указывается ссылка на OpenApi-схему данных, и выбирается идентификатор схемы-пакета.
![choice.png](choice.png){ style="block" }
> После выбора openApi-схемы, доступные варианты пакетов будут заполнены автоматически

В момент срабатывания условия валидации, подготовленный пакет передается в валидатор, и проверяется на соответствие схеме
с указанным идентификатором.

## Валидация произвольных данных
> Данный пункт особенно интересен, если вы хотите начать валидировать пакеты в уже существующей интеграции.
> 
{style="note"}

Существует возможность валидации произвольных данных. 

Для этого:
- Подготовьте десериализованный пакет (Валидировать можно примитивные типы, Массив, структуру или соответствие).
- Вызовите следующий метод:
```
МассивОшибок = инт_ВалидаторПакетов.Валидировать(ПодготовленноеСообщение,
                                                          ИмяСхемыПакета,
                                                          СсылкаНаOpenApiСхему);
```
- Если массив ошибок пуст, значит валидация прошла успешно. 

